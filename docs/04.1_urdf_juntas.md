# Tipos de Juntas em URDF no ROS2 Foxy

Este documento explica os diferentes tipos de juntas (joints) disponíveis no formato URDF (Unified Robot Description Format) para uso no ROS2 Foxy.

## O que são Juntas (Joints)?

As juntas definem como os links (elos) do robô estão conectados e como podem se mover em relação uns aos outros. Cada junta conecta exatamente dois links:  um link pai (parent) e um link filho (child).

## Tipos de Juntas Disponíveis

### 1. **Fixed (Fixa)**
```xml
<joint name="base_to_sensor" type="fixed">
  <parent link="base_link"/>
  <child link="sensor_link"/>
  <origin xyz="0 0 0.1" rpy="0 0 0"/>
</joint>
```
- **Descrição**:  Conexão rígida sem movimento
- **Graus de liberdade**: 0
- **Uso comum**: Fixar sensores, câmeras, ou componentes estáticos ao robô

### 2. **Revolute (Rotacional)**
```xml
<joint name="joint1" type="revolute">
  <parent link="base_link"/>
  <child link="link1"/>
  <origin xyz="0 0 0.05" rpy="0 0 0"/>
  <axis xyz="0 0 1"/>
  <limit effort="100" lower="-1. 57" upper="1.57" velocity="1. 0"/>
</joint>
```
- **Descrição**:  Rotação em torno de um eixo com limites
- **Graus de liberdade**: 1
- **Parâmetros importantes**:
  - `axis`: Eixo de rotação
  - `limit`: Define esforço máximo, ângulos mínimo/máximo e velocidade
- **Uso comum**: Articulações de braços robóticos, rodas direcionáveis

### 3. **Continuous (Contínua)**
```xml
<joint name="wheel_joint" type="continuous">
  <parent link="base_link"/>
  <child link="wheel_link"/>
  <origin xyz="0 0.1 0" rpy="0 0 0"/>
  <axis xyz="0 1 0"/>
  <limit effort="100" velocity="10. 0"/>
</joint>
```
- **Descrição**:  Rotação contínua em torno de um eixo sem limites angulares
- **Graus de liberdade**: 1
- **Diferença da revolute**: Não tem limites `lower` e `upper`
- **Uso comum**: Rodas de robôs móveis, hélices

### 4. **Prismatic (Prismática)**
```xml
<joint name="linear_joint" type="prismatic">
  <parent link="base_link"/>
  <child link="slider_link"/>
  <origin xyz="0 0 0" rpy="0 0 0"/>
  <axis xyz="1 0 0"/>
  <limit effort="1000" lower="0" upper="0. 5" velocity="0.5"/>
</joint>
```
- **Descrição**: Movimento linear ao longo de um eixo
- **Graus de liberdade**: 1
- **Parâmetros importantes**: 
  - `axis`: Direção do movimento linear
  - `limit`: Define força máxima, limites de deslocamento e velocidade
- **Uso comum**: Atuadores lineares, elevadores, garras deslizantes

### 5. **Floating (Flutuante)**
```xml
<joint name="floating_joint" type="floating">
  <parent link="world"/>
  <child link="floating_base"/>
  <origin xyz="0 0 1" rpy="0 0 0"/>
</joint>
```
- **Descrição**: Permite movimento livre em todas as direções (3 translações + 3 rotações)
- **Graus de liberdade**: 6
- **Uso comum**:  Simular objetos em queda livre, drones, submarinos

### 6. **Planar (Planar)**
```xml
<joint name="planar_joint" type="planar">
  <parent link="world"/>
  <child link="base_link"/>
  <origin xyz="0 0 0" rpy="0 0 0"/>
  <axis xyz="0 0 1"/>
</joint>
```
- **Descrição**:  Movimento restrito a um plano (2 translações + 1 rotação)
- **Graus de liberdade**: 3
- **Parâmetros importantes**:
  - `axis`: Normal ao plano de movimento
- **Uso comum**: Robôs móveis em superfícies planas

## Estrutura Básica de uma Junta

```xml
<joint name="nome_da_junta" type="tipo">
  <parent link="link_pai"/>
  <child link="link_filho"/>
  <origin xyz="x y z" rpy="roll pitch yaw"/>
  <axis xyz="x y z"/>  <!-- Opcional, depende do tipo -->
  <limit effort="max_torque" lower="min_angle" upper="max_angle" velocity="max_vel"/>
  <dynamics damping="valor" friction="valor"/>  <!-- Opcional -->
  <calibration rising="valor"/>  <!-- Opcional -->
  <mimic joint="outra_junta" multiplier="1.0" offset="0.0"/>  <!-- Opcional -->
</joint>
```

## Parâmetros Comuns

### Origin
- **xyz**: Posição relativa do link filho em relação ao pai (metros)
- **rpy**: Orientação em ângulos de Euler (roll, pitch, yaw em radianos)

### Axis
- Define o eixo de rotação (revolute/continuous) ou direção de movimento (prismatic)
- Formato: `xyz="x y z"` (vetor unitário)

### Limit
- **effort**: Força/torque máximo (N ou Nm)
- **lower**: Limite inferior (radianos ou metros)
- **upper**: Limite superior (radianos ou metros)
- **velocity**: Velocidade máxima (rad/s ou m/s)

### Dynamics (Opcional)
- **damping**: Coeficiente de amortecimento
- **friction**: Coeficiente de atrito

## Tabela Resumo

| Tipo | Graus de Liberdade | Movimento | Limites | Uso Típico |
|------|-------------------|-----------|---------|------------|
| Fixed | 0 | Nenhum | N/A | Sensores, componentes fixos |
| Revolute | 1 | Rotação | Sim | Articulações de braços |
| Continuous | 1 | Rotação | Não (apenas velocidade) | Rodas |
| Prismatic | 1 | Linear | Sim | Atuadores lineares |
| Floating | 6 | 3D completo | Não | Objetos livres, drones |
| Planar | 3 | 2D + rotação | Não | Robôs móveis 2D |

## Exemplo Completo

```xml
<?xml version="1.0"?>
<robot name="exemplo_robot">
  
  <!-- Link base -->
  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.2 0.2 0.1"/>
      </geometry>
    </visual>
  </link>
  
  <!-- Link do braço -->
  <link name="arm_link">
    <visual>
      <geometry>
        <cylinder length="0.3" radius="0.02"/>
      </geometry>
    </visual>
  </link>
  
  <!-- Junta rotacional -->
  <joint name="base_to_arm" type="revolute">
    <parent link="base_link"/>
    <child link="arm_link"/>
    <origin xyz="0 0 0.05" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="50" lower="-3.14" upper="3.14" velocity="2.0"/>
  </joint>
  
  <!-- Link da roda -->
  <link name="wheel_link">
    <visual>
      <geometry>
        <cylinder length="0.05" radius="0.1"/>
      </geometry>
    </visual>
  </link>
  
  <!-- Junta contínua -->
  <joint name="base_to_wheel" type="continuous">
    <parent link="base_link"/>
    <child link="wheel_link"/>
    <origin xyz="0.15 0 0" rpy="1.57 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="10" velocity="5.0"/>
  </joint>
  
</robot>
```

## Dicas Importantes

1. **Escolha o tipo correto**:  Use `fixed` para componentes estáticos, `revolute` para juntas com limites, `continuous` para rotações ilimitadas

2. **Defina limites realistas**: Os valores de `effort`, `velocity`, `lower` e `upper` devem refletir as capacidades físicas do robô

3. **Eixos unitários**: O vetor `axis` não precisa ser normalizado, mas é boa prática

4. **Sistema de coordenadas**: ROS usa o sistema right-handed (X-forward, Y-left, Z-up)

5. **Validação**: Use `check_urdf` para validar seu arquivo: 
   ```bash
   check_urdf seu_robot.urdf
   ```

6. **Visualização**:  Teste no RViz2: 
   ```bash
   ros2 launch urdf_tutorial display. launch. py model:=seu_robot. urdf
   ```

## Recursos Adicionais

- [Documentação oficial URDF](http://wiki.ros.org/urdf/XML/joint)
- [Tutorial URDF ROS2](https://docs.ros.org/en/foxy/Tutorials/Intermediate/URDF/URDF-Main. html)
- [Gazebo e URDF](https://classic.gazebosim.org/tutorials?tut=ros_urdf)

